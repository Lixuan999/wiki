(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55738a8b"],{"4aa7":function(e,i,t){"use strict";t.r(i);var a=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"page-share-view-vue"},[t("el-row",{attrs:{type:"border-card"}},[t("div",{staticStyle:{"max-width":"950px",margin:"0 auto"}},[t("div",{staticClass:"wiki-title"},[e._v(e._s(e.wikiPage.name))]),t("div",{staticClass:"wiki-author"},[e.wikiPage.updateTime?t("span",[e._v("最后修改："+e._s(e.wikiPage.updateTime))]):t("span",[e._v("创建时间："+e._s(e.wikiPage.createTime))])]),t("div",{staticClass:"wiki-files"},[t("el-table",{directives:[{name:"show",rawName:"v-show",value:e.pageFileList.length>0,expression:"pageFileList.length > 0"}],staticStyle:{width:"100%","margin-bottom":"5px"},attrs:{data:e.pageFileList,border:""}},[t("el-table-column",{attrs:{label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("a",{attrs:{target:"_blank",href:i.row.fileUrl}},[e._v(e._s(i.row.fileName))])]}}])}),t("el-table-column",{attrs:{label:"文件大小"},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v(e._s(e.computeFileSize(i.row.fileSize)))]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180px"}}),t("el-table-column",{attrs:{prop:"downloadNum",label:"下载次数",width:"80px"}})],1)],1),t("div",{ref:"pageContent",staticClass:"wiki-page-content"},[2==e.wikiPage.editorType?t("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.pageShowDetail)}}):t("div",{staticClass:"wang-editor-body",domProps:{innerHTML:e._s(e.pageShowDetail)}})])])]),t("div",{ref:"imagePreview"},[e.showImagePreview?t("el-image-viewer",{attrs:{"url-list":e.showImagePreviewList,"on-close":e.closeImagePreview,"initial-index":e.previewInitialIndex}}):e._e()],1)],1)},n=[],s=(t("4160"),t("c975"),t("b0c0"),t("b680"),t("159b"),t("0a79")),r=t("b2d8"),o=t("08a9"),l=(t("c350"),t("64e1"),{data:function(){return{spaceUuid:"",nowPageId:"",wikiPage:{},pageFileList:[],pageShowDetail:"",previewInitialIndex:0,showImagePreview:!1,showImagePreviewList:[]}},components:{"el-image-viewer":o["a"]},beforeRouteUpdate:function(e,i,t){this.initQueryParam(e),t()},mounted:function(){this.initQueryParam(this.$route)},methods:{loadPageDetail:function(e){var i=this,t={pageId:e,space:this.spaceUuid};s["a"].openPageDetail(t).then((function(e){var t=e.data.wikiPage||{};t.selfZan=e.data.selfZan||0,i.wikiPage=t;var a=e.data.pageContent||{};i.pageFileList=e.data.fileList||[],2===i.wikiPage.editorType&&(a.content=r["markdownIt"].render(a.content)),i.pageShowDetail=a.content,document.title=t.name||"WIKI-内容展示",setTimeout((function(){return i.previewPageImage()}),500)}))},initQueryParam:function(e){this.spaceUuid=e.query.space,this.nowPageId=e.query.pageId,this.nowPageId&&this.loadPageDetail(this.nowPageId)},computeFileSize:function(e){if(!e)return"-";var i="";i=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var t=i+"",a=t.indexOf("."),n=t.substr(a+1,2);return"00"==n?t.substring(0,a)+t.substr(a+3,2):i},closeImagePreview:function(){this.showImagePreview=!1},previewPageImage:function(){var e=this,i=[],t=this.$refs.pageContent.querySelectorAll("img");t.forEach((function(t,a){i.push(t.src),t.onclick=function(){e.previewInitialIndex=a,e.showImagePreviewList=i,e.showImagePreview=!0,setTimeout((function(){return e.initImageViewerMask()}),0)}}))},initImageViewerMask:function(){var e=this,i=this.$refs.imagePreview.querySelectorAll(".el-image-viewer__mask");i.forEach((function(i){i.onclick=function(){return e.showImagePreview=!1}}))}}}),c=l,u=(t("6afb"),t("2877")),w=Object(u["a"])(c,a,n,!1,null,null,null);i["default"]=w.exports},"6afb":function(e,i,t){"use strict";var a=t("aae1"),n=t.n(a);n.a},aae1:function(e,i,t){}}]);